<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a cross-lagged panel model from a lavaan-like syntax. The syntax (model)
can be fairly complicated to read; use the simplify() - function to make it more
readable. However, we recommend passing the complex syntax to lavaan instead of
the readable one to reduce the likelihood of errors."><title>CLPM — CLPM • lessTemplates</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CLPM — CLPM"><meta property="og:description" content="Creates a cross-lagged panel model from a lavaan-like syntax. The syntax (model)
can be fairly complicated to read; use the simplify() - function to make it more
readable. However, we recommend passing the complex syntax to lavaan instead of
the readable one to reduce the likelihood of errors."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lessTemplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Continuous-Time-SEM.html">Continuous-Time-SEM</a>
    <a class="dropdown-item" href="../articles/Cross-Lagged-Panel-Model.html">Cross-Lagged-Panel-Model</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CLPM</h1>
      
      <div class="d-none name"><code>CLPM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a cross-lagged panel model from a lavaan-like syntax. The syntax (model)
can be fairly complicated to read; use the simplify() - function to make it more
readable. However, we recommend passing the complex syntax to lavaan instead of
the readable one to reduce the likelihood of errors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CLPM</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  addManifestVar <span class="op">=</span> <span class="st">"variant"</span>,</span>
<span>  addLatentVar <span class="op">=</span> <span class="st">"variant"</span>,</span>
<span>  meanstructure <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>string specifying the model</p></dd>


<dt>data</dt>
<dd><p>longitudinal data in long format. Must have a column named 'person'
and a column named 'occasion'</p></dd>


<dt>addManifestVar</dt>
<dd><p>set to "variant" to add manifest variances which are occasion specific
(variant). Set to "invariant" to add manifest variances which are equal for all
occasions (measurement invariant). Set to "no" to not add any manifest variances (set to 0)</p></dd>


<dt>addLatentVar</dt>
<dd><p>set to "variant" to add latent variances which are occasion specific
(variant). Set to "invariant" to add latent variances which are equal for all
occasions (measurement invariant). Set to "no" to not add any latent variances (set to 0)</p></dd>


<dt>meanstructure</dt>
<dd><p>set to TRUE to add a mean structure</p></dd>


<dt>silent</dt>
<dd><p>set to TRUE to suppress messages</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list with (1) model -&gt; a string with syntax to pass to lavaan as model,
(2) data -&gt; a data set in wide format to pass to lavaan, and (3) internal -&gt;
internal objects needed for other functions of lessTemplates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Example 1:</span></span>
<span><span class="co"># The following simulation and analysis of a random intercept cross-lagged panel model</span></span>
<span><span class="co"># is based on the syntax from Jeroen D. Mulder &amp; Ellen L. Hamaker (2021)</span></span>
<span><span class="co"># Three Extensions of the Random Intercept Cross-Lagged Panel Model,</span></span>
<span><span class="co"># Structural Equation Modeling: A Multidisciplinary Journal,</span></span>
<span><span class="co"># 28:4, 638-648, DOI: 10.1080/10705511.2020.1784738</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># See https://jeroendmulder.github.io/RI-CLPM/lavaan.html</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/lessTemplates/">lessTemplates</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhorzek/lessSEM" class="external-link">lessSEM</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate Data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulateRICLPM.html">simulateRICLPM</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set up model</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"># autoregressive and cross-lagged parameters:</span></span>
<span><span class="st">eta1_(u) ~ a11_(u)*eta1_(u-1) + a12_(u)*eta2_(u-1)</span></span>
<span><span class="st">eta2_(u) ~ a21_(u)*eta1_(u-1) + a22_(u)*eta2_(u-1)</span></span>
<span><span class="st"></span></span>
<span><span class="st"># covariances</span></span>
<span><span class="st">eta1_(u) ~~ 0*eta2_(u) + v11*eta1_(u)</span></span>
<span><span class="st">eta2_(u) ~~ v22*eta2_(u)</span></span>
<span><span class="st"></span></span>
<span><span class="st"># Add observations:</span></span>
<span><span class="st">eta1_(u) =~ 1*y1_(u)</span></span>
<span><span class="st">eta2_(u) =~ 1*y2_(u)</span></span>
<span><span class="st"></span></span>
<span><span class="st">y1_(u) ~~ 0*y1_(u)</span></span>
<span><span class="st">y2_(u) ~~ 0*y2_(u)</span></span>
<span><span class="st"></span></span>
<span><span class="st"># random intercepts</span></span>
<span><span class="st">RI_eta1 =~ 1*y1_(u)</span></span>
<span><span class="st">RI_eta2 =~ 1*y2_(u)</span></span>
<span><span class="st"></span></span>
<span><span class="st">RI_eta1 ~~ vri11*RI_eta1 + vri12*RI_eta2</span></span>
<span><span class="st">RI_eta2 ~~ vri22*RI_eta2</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="co"># create the lavaan syntax using lessTemplates:</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">lessTemplates</span><span class="fu">::</span><span class="fu">CLPM</span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span>
<span>                               data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                               addManifestVar <span class="op">=</span> <span class="st">"no"</span><span class="op">)</span></span>
<span><span class="co"># fit the model:</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">m</span><span class="op">$</span><span class="va">model</span>,</span>
<span>           data <span class="op">=</span> <span class="va">m</span><span class="op">$</span><span class="va">data</span>,</span>
<span>           meanstructure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           missing <span class="op">=</span> <span class="st">"ml"</span><span class="op">)</span></span>
<span><span class="co"># get the parameter estimates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Example 2:</span></span>
<span><span class="co"># Simulation of a second order model:</span></span>
<span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulateExample1.html">simulateExample1</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's take a look at the model and the data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generating the lavaan syntax:</span></span>
<span><span class="va">clpm</span> <span class="op">&lt;-</span> <span class="fu">CLPM</span><span class="op">(</span>model <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">model</span>,</span>
<span>             data <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The syntax generated by CLPM can be quite complicated to read. To simplify</span></span>
<span><span class="co"># the syntax, use simplify():</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">clpm</span><span class="op">$</span><span class="va">model</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit with lavaan:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">clpm</span><span class="op">$</span><span class="va">model</span>,</span>
<span>           data <span class="op">=</span> <span class="va">clpm</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jannik H. Orzek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

